<% content_for :head do %>
  <%= javascript_include_tag 'product_sortable' %>
<% end %>

<% content_for :page_actions do %>
  <%= button_link_to t('spree_slider.new_slide'), new_object_url, { class: 'btn-success', icon: 'add', id: 'admin_new_slide_link' } %>
<% end %>

<% content_for :page_title do %>
  <%= t('spree_slider.title') %>
<% end %>

<% product_slides = @slides.product_slides %>
<% image_slides = @slides.image_slides %>

<% [
   [I18n.t("spree_slider.image_slides"), image_slides, :image],
  [I18n.t("spree_slider.product_slides"), product_slides, :product]
  ].each do |translation, slides, type|%>
    <h3><%= translation %></h3>
  <% if slides.present? %>
    <div class="table-responsive border rounded bg-white mb-5">
      <table class="table sortable" id="listing_<%= type %>_slides" data-hook data-sortable-link="<%= update_positions_admin_slides_url %>">
        <thead>
          <tr data-hook="admin_slides_index_headers">
            <th></th>
            <th><%= Spree.t(:image) %></th>
            <th><%= get_column_header_by_type(type) %></th>
            <th><%= Spree.t(:published) %></th>
            <th class="actions"></th>
          </tr>
        </thead>
        <tbody>
          <% slides.each do |slide| %>
            <tr id="<%= spree_dom_id slide %>" data-hook="admin_slides_index_rows">
              <td class="move-handle">
                <%= svg_icon name: "grip-vertical.svg", width: '18', height: '18' %>
              </td>
              <td><%= image_tag slide.slide_image ? main_app.url_for(slide.preview) : "noimage/small.png", height: '71', width: '120' %></td>
              <td><%= get_image_link_by_type(slide, type) %></td>
              <td><%= slide.published ? Spree.t(:say_yes) : Spree.t(:say_no) %></td>
              <td class="actions text-right">
                <%= link_to_edit slide, no_text: true, class: 'edit' %>
                &nbsp;
                <%= link_to_delete slide, no_text: true %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  <% else %>
      <div class="text-center no-objects-found m-5">
        <%= Spree.t(:no_resource_found, resource: plural_resource_name(Spree::Slide)) %>,
        <%= link_to Spree.t(:add_one), new_object_url if can?(:create, Spree::Slide) %>!
      </div>
   <% end %>
<% end %>